{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar InteractionEvents;\n\n(function (InteractionEvents) {\n  InteractionEvents[\"MouseDown\"] = \"mousedown\";\n  InteractionEvents[\"MouseMove\"] = \"mousemove\";\n  InteractionEvents[\"MouseUp\"] = \"mouseup\";\n  InteractionEvents[\"TouchStart\"] = \"touchstart\";\n  InteractionEvents[\"TouchMove\"] = \"touchmove\";\n  InteractionEvents[\"TouchEnd\"] = \"touchend\";\n})(InteractionEvents || (InteractionEvents = {}));\n\nvar Joystick =\n/** @class */\nfunction (_super) {\n  __extends(Joystick, _super);\n\n  function Joystick(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      dragging: false\n    };\n    _this._stickRef = React.createRef();\n    _this._baseRef = React.createRef();\n\n    _this._throttleMoveCallback = function () {\n      var lastCall = 0;\n      return function (event) {\n        var now = new Date().getTime();\n        var throttleAmount = _this.props.throttle || 0;\n\n        if (now - lastCall < throttleAmount) {\n          return;\n        }\n\n        lastCall = now;\n\n        if (_this.props.move) {\n          return _this.props.move(event);\n        }\n      };\n    }();\n\n    _this._boundMouseUp = function () {\n      _this._mouseUp();\n    };\n\n    _this._boundMouseMove = function (event) {\n      _this._mouseMove(event);\n    };\n\n    return _this;\n  }\n\n  Joystick.prototype._updatePos = function (coordinates) {\n    var _this = this;\n\n    window.requestAnimationFrame(function () {\n      _this.setState({\n        coordinates: coordinates\n      });\n    });\n\n    this._throttleMoveCallback({\n      type: \"move\",\n      x: coordinates.relativeX,\n      y: -coordinates.relativeY,\n      direction: coordinates.direction\n    });\n  };\n\n  Joystick.prototype._mouseDown = function (e) {\n    if (this.props.disabled !== true) {\n      this._parentRect = this._baseRef.current.getBoundingClientRect();\n      this.setState({\n        dragging: true\n      });\n\n      if (e.type === InteractionEvents.MouseDown) {\n        window.addEventListener(InteractionEvents.MouseUp, this._boundMouseUp);\n        window.addEventListener(InteractionEvents.MouseMove, this._boundMouseMove);\n      } else {\n        window.addEventListener(InteractionEvents.TouchEnd, this._boundMouseUp);\n        window.addEventListener(InteractionEvents.TouchMove, this._boundMouseMove);\n      }\n\n      if (this.props.start) {\n        this.props.start({\n          type: \"start\",\n          x: null,\n          y: null,\n          direction: null\n        });\n      }\n    }\n  };\n\n  Joystick.prototype._getDirection = function (atan2) {\n    if (atan2 > 2.35619449 || atan2 < -2.35619449) {\n      return \"FORWARD\";\n    } else if (atan2 < 2.35619449 && atan2 > 0.785398163) {\n      return \"RIGHT\";\n    } else if (atan2 < -0.785398163) {\n      return \"LEFT\";\n    }\n\n    return \"BACKWARD\";\n  };\n\n  Joystick.prototype._getWithinBounds = function (value) {\n    var halfBaseSize = this._baseSize / 2;\n\n    if (value > halfBaseSize) {\n      return halfBaseSize;\n    }\n\n    if (value < -halfBaseSize) {\n      return halfBaseSize * -1;\n    }\n\n    return value;\n  };\n\n  Joystick.prototype._mouseMove = function (event) {\n    if (this.state.dragging) {\n      var absoluteX = null;\n      var absoluteY = null;\n\n      if (event.type === InteractionEvents.MouseMove) {\n        absoluteX = event.clientX;\n        absoluteY = event.clientY;\n      } else {\n        absoluteX = event.touches[0].clientX;\n        absoluteY = event.touches[0].clientY;\n      }\n\n      var relativeX = this._getWithinBounds(absoluteX - this._parentRect.left - this._baseSize / 2);\n\n      var relativeY = this._getWithinBounds(absoluteY - this._parentRect.top - this._baseSize / 2);\n\n      var atan2 = Math.atan2(relativeX, relativeY);\n\n      this._updatePos({\n        relativeX: relativeX,\n        relativeY: relativeY,\n        direction: this._getDirection(atan2),\n        axisX: absoluteX - this._parentRect.left,\n        axisY: absoluteY - this._parentRect.top\n      });\n    }\n  };\n\n  Joystick.prototype._mouseUp = function () {\n    this.setState({\n      dragging: false,\n      coordinates: undefined\n    });\n    window.removeEventListener(\"mouseup\", this._boundMouseUp);\n    window.removeEventListener(\"mousemove\", this._boundMouseMove);\n\n    if (this.props.stop) {\n      this.props.stop({\n        type: \"stop\",\n        x: null,\n        y: null,\n        direction: null\n      });\n    }\n  };\n\n  Joystick.prototype._getBaseStyle = function () {\n    var baseColor = this.props.baseColor !== undefined ? this.props.baseColor : \"#000033\";\n    var baseSizeString = this._baseSize + \"px\";\n    return {\n      height: baseSizeString,\n      width: baseSizeString,\n      background: baseColor,\n      borderRadius: this._baseSize,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    };\n  };\n\n  Joystick.prototype._getStickStyle = function () {\n    var stickColor = this.props.stickColor !== undefined ? this.props.stickColor : \"#3D59AB\";\n    var stickSize = this._baseSize / 1.5 + \"px\";\n    var stickStyle = {\n      background: stickColor,\n      cursor: \"move\",\n      height: stickSize,\n      width: stickSize,\n      borderRadius: this._baseSize,\n      flexShrink: 0\n    };\n\n    if (this.state.dragging && this.state.coordinates !== undefined) {\n      stickStyle = Object.assign({}, stickStyle, {\n        position: 'absolute',\n        transform: \"translate3d(\" + this.state.coordinates.relativeX + \"px, \" + this.state.coordinates.relativeY + \"px, 0)\"\n      });\n    }\n\n    return stickStyle;\n  };\n\n  Joystick.prototype.render = function () {\n    this._baseSize = this.props.size || 100;\n\n    var baseStyle = this._getBaseStyle();\n\n    var stickStyle = this._getStickStyle();\n\n    return React.createElement(\"div\", {\n      className: this.props.disabled ? 'joystick-base-disabled' : '',\n      onMouseDown: this._mouseDown.bind(this),\n      onTouchStart: this._mouseDown.bind(this),\n      ref: this._baseRef,\n      style: baseStyle\n    }, React.createElement(\"div\", {\n      ref: this._stickRef,\n      className: this.props.disabled ? 'joystick-disabled' : '',\n      style: stickStyle\n    }));\n  };\n\n  return Joystick;\n}(React.Component);\n\nexports.Joystick = Joystick;","map":{"version":3,"sources":["../../src/Joystick.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAYA,IAAK,iBAAL;;AAAA,CAAA,UAAK,iBAAL,EAAsB;AAClB,EAAA,iBAAA,CAAA,WAAA,CAAA,GAAA,WAAA;AACA,EAAA,iBAAA,CAAA,WAAA,CAAA,GAAA,WAAA;AACA,EAAA,iBAAA,CAAA,SAAA,CAAA,GAAA,SAAA;AACA,EAAA,iBAAA,CAAA,YAAA,CAAA,GAAA,YAAA;AACA,EAAA,iBAAA,CAAA,WAAA,CAAA,GAAA,WAAA;AACA,EAAA,iBAAA,CAAA,UAAA,CAAA,GAAA,UAAA;AACH,CAPD,EAAK,iBAAiB,KAAjB,iBAAiB,GAAA,EAAA,CAAtB;;AA6BA,IAAA,QAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAuB,EAAA,SAAA,CAAA,QAAA,EAAA,MAAA,CAAA;;AASnB,WAAA,QAAA,CAAY,KAAZ,EAAiC;AAAjC,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,KAAN,KAAY,IADhB;;AAEI,IAAA,KAAI,CAAC,KAAL,GAAa;AACT,MAAA,QAAQ,EAAE;AADD,KAAb;AAGA,IAAA,KAAI,CAAC,SAAL,GAAiB,KAAK,CAAC,SAAN,EAAjB;AACA,IAAA,KAAI,CAAC,QAAL,GAAgB,KAAK,CAAC,SAAN,EAAhB;;AAGA,IAAA,KAAI,CAAC,qBAAL,GAA8B,YAAA;AAC1B,UAAI,QAAQ,GAAG,CAAf;AACA,aAAO,UAAC,KAAD,EAAW;AAEd,YAAM,GAAG,GAAG,IAAI,IAAJ,GAAW,OAAX,EAAZ;AACA,YAAM,cAAc,GAAG,KAAI,CAAC,KAAL,CAAW,QAAX,IAAuB,CAA9C;;AACA,YAAI,GAAG,GAAG,QAAN,GAAiB,cAArB,EAAqC;AACjC;AACH;;AACD,QAAA,QAAQ,GAAG,GAAX;;AACA,YAAI,KAAI,CAAC,KAAL,CAAW,IAAf,EAAqB;AACjB,iBAAO,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB,KAAhB,CAAP;AACH;AACJ,OAXD;AAYH,KAd4B,EAA7B;;AAgBA,IAAA,KAAI,CAAC,aAAL,GAAqB,YAAA;AACjB,MAAA,KAAI,CAAC,QAAL;AACH,KAFD;;AAGA,IAAA,KAAI,CAAC,eAAL,GAAuB,UAAC,KAAD,EAAU;AAC7B,MAAA,KAAI,CAAC,UAAL,CAAgB,KAAhB;AACH,KAFD;;;AAKH;;AAEO,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAR,UAAmB,WAAnB,EAAoD;AAApD,QAAA,KAAA,GAAA,IAAA;;AACI,IAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AACzB,MAAA,KAAI,CAAC,QAAL,CAAc;AACV,QAAA,WAAW,EAAA;AADD,OAAd;AAGH,KAJD;;AAKA,SAAK,qBAAL,CAA2B;AACvB,MAAA,IAAI,EAAE,MADiB;AAEvB,MAAA,CAAC,EAAE,WAAW,CAAC,SAFQ;AAGvB,MAAA,CAAC,EAAE,CAAC,WAAW,CAAC,SAHO;AAIvB,MAAA,SAAS,EAAE,WAAW,CAAC;AAJA,KAA3B;AAOH,GAbO;;AAeA,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAR,UAAmB,CAAnB,EAAyB;AACrB,QAAG,KAAK,KAAL,CAAW,QAAX,KAAwB,IAA3B,EAAgC;AAC5B,WAAK,WAAL,GAAmB,KAAK,QAAL,CAAc,OAAd,CAAsB,qBAAtB,EAAnB;AAEA,WAAK,QAAL,CAAc;AACV,QAAA,QAAQ,EAAE;AADA,OAAd;;AAIA,UAAG,CAAC,CAAC,IAAF,KAAW,iBAAiB,CAAC,SAAhC,EAA0C;AACtC,QAAA,MAAM,CAAC,gBAAP,CAAwB,iBAAiB,CAAC,OAA1C,EAAmD,KAAK,aAAxD;AACA,QAAA,MAAM,CAAC,gBAAP,CAAwB,iBAAiB,CAAC,SAA1C,EAAqD,KAAK,eAA1D;AACH,OAHD,MAGO;AACH,QAAA,MAAM,CAAC,gBAAP,CAAwB,iBAAiB,CAAC,QAA1C,EAAoD,KAAK,aAAzD;AACA,QAAA,MAAM,CAAC,gBAAP,CAAwB,iBAAiB,CAAC,SAA1C,EAAqD,KAAK,eAA1D;AACH;;AAED,UAAI,KAAK,KAAL,CAAW,KAAf,EAAsB;AAClB,aAAK,KAAL,CAAW,KAAX,CAAiB;AACb,UAAA,IAAI,EAAE,OADO;AAEb,UAAA,CAAC,EAAE,IAFU;AAGb,UAAA,CAAC,EAAE,IAHU;AAIb,UAAA,SAAS,EAAE;AAJE,SAAjB;AAMH;AACJ;AACJ,GAzBO;;AA2BA,EAAA,QAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,KAAtB,EAAmC;AAC/B,QAAG,KAAK,GAAG,UAAR,IAAsB,KAAK,GAAG,CAAC,UAAlC,EAA6C;AACzC,aAAO,SAAP;AACH,KAFD,MAEO,IAAG,KAAK,GAAG,UAAR,IAAsB,KAAK,GAAG,WAAjC,EAA8C;AACjD,aAAO,OAAP;AACH,KAFM,MAEA,IAAG,KAAK,GAAG,CAAC,WAAZ,EAAwB;AAC3B,aAAO,MAAP;AACH;;AACD,WAAO,UAAP;AAGH,GAXO;;AAYA,EAAA,QAAA,CAAA,SAAA,CAAA,gBAAA,GAAR,UAAyB,KAAzB,EAAqC;AACjC,QAAM,YAAY,GAAG,KAAK,SAAL,GAAiB,CAAtC;;AACA,QAAG,KAAK,GAAG,YAAX,EAAwB;AACpB,aAAO,YAAP;AACH;;AACD,QAAG,KAAK,GAAG,CAAE,YAAb,EAA2B;AACvB,aAAO,YAAY,GAAG,CAAC,CAAvB;AACH;;AACD,WAAO,KAAP;AACH,GATO;;AAUA,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAR,UAAmB,KAAnB,EAA6B;AACzB,QAAI,KAAK,KAAL,CAAW,QAAf,EAAyB;AACzB,UAAI,SAAS,GAAG,IAAhB;AACA,UAAI,SAAS,GAAG,IAAhB;;AACA,UAAG,KAAK,CAAC,IAAN,KAAe,iBAAiB,CAAC,SAApC,EAA8C;AAC1C,QAAA,SAAS,GAAG,KAAK,CAAC,OAAlB;AACA,QAAA,SAAS,GAAG,KAAK,CAAC,OAAlB;AACH,OAHD,MAGO;AACH,QAAA,SAAS,GAAG,KAAK,CAAC,OAAN,CAAc,CAAd,EAAiB,OAA7B;AACA,QAAA,SAAS,GAAG,KAAK,CAAC,OAAN,CAAc,CAAd,EAAiB,OAA7B;AACH;;AAGG,UAAM,SAAS,GAAG,KAAK,gBAAL,CAAsB,SAAS,GAAG,KAAK,WAAL,CAAiB,IAA7B,GAAqC,KAAK,SAAL,GAAiB,CAA5E,CAAlB;;AACA,UAAM,SAAS,GAAG,KAAK,gBAAL,CAAsB,SAAS,GAAG,KAAK,WAAL,CAAiB,GAA7B,GAAoC,KAAK,SAAL,GAAiB,CAA3E,CAAlB;;AACA,UAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,SAAX,EAAsB,SAAtB,CAAd;;AAEA,WAAK,UAAL,CAAgB;AACZ,QAAA,SAAS,EAAA,SADG;AAEZ,QAAA,SAAS,EAAA,SAFG;AAGZ,QAAA,SAAS,EAAE,KAAK,aAAL,CAAmB,KAAnB,CAHC;AAIZ,QAAA,KAAK,EAAE,SAAS,GAAG,KAAK,WAAL,CAAiB,IAJxB;AAKZ,QAAA,KAAK,EAAE,SAAS,GAAG,KAAK,WAAL,CAAiB;AALxB,OAAhB;AAOH;AACJ,GAzBO;;AA2BA,EAAA,QAAA,CAAA,SAAA,CAAA,QAAA,GAAR,YAAA;AACI,SAAK,QAAL,CAAc;AACV,MAAA,QAAQ,EAAE,KADA;AAEV,MAAA,WAAW,EAAE;AAFH,KAAd;AAIA,IAAA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,KAAK,aAA3C;AACA,IAAA,MAAM,CAAC,mBAAP,CAA2B,WAA3B,EAAwC,KAAK,eAA7C;;AAEA,QAAI,KAAK,KAAL,CAAW,IAAf,EAAqB;AACjB,WAAK,KAAL,CAAW,IAAX,CAAgB;AACZ,QAAA,IAAI,EAAE,MADM;AAEZ,QAAA,CAAC,EAAE,IAFS;AAGZ,QAAA,CAAC,EAAE,IAHS;AAIZ,QAAA,SAAS,EAAE;AAJC,OAAhB;AAMH;AAEJ,GAjBO;;AAkBA,EAAA,QAAA,CAAA,SAAA,CAAA,aAAA,GAAR,YAAA;AACI,QAAM,SAAS,GAAW,KAAK,KAAL,CAAW,SAAX,KAAyB,SAAzB,GAAqC,KAAK,KAAL,CAAW,SAAhD,GAA4D,SAAtF;AAEA,QAAM,cAAc,GAAc,KAAK,SAAL,GAAc,IAAhD;AACA,WAAO;AACH,MAAA,MAAM,EAAE,cADL;AAEH,MAAA,KAAK,EAAE,cAFJ;AAGH,MAAA,UAAU,EAAE,SAHT;AAIH,MAAA,YAAY,EAAE,KAAK,SAJhB;AAKH,MAAA,OAAO,EAAE,MALN;AAMH,MAAA,cAAc,EAAE,QANb;AAOH,MAAA,UAAU,EAAE;AAPT,KAAP;AAUH,GAdO;;AAeA,EAAA,QAAA,CAAA,SAAA,CAAA,cAAA,GAAR,YAAA;AACI,QAAM,UAAU,GAAW,KAAK,KAAL,CAAW,UAAX,KAA0B,SAA1B,GAAsC,KAAK,KAAL,CAAW,UAAjD,GAA8D,SAAzF;AACA,QAAM,SAAS,GAAc,KAAK,SAAL,GAAiB,GAAjB,GAAoB,IAAjD;AAEA,QAAI,UAAU,GAAE;AACZ,MAAA,UAAU,EAAE,UADA;AAER,MAAA,MAAM,EAAE,MAFA;AAGZ,MAAA,MAAM,EAAE,SAHI;AAIZ,MAAA,KAAK,EAAE,SAJK;AAKZ,MAAA,YAAY,EAAE,KAAK,SALP;AAMZ,MAAA,UAAU,EAAE;AANA,KAAhB;;AASA,QAAI,KAAK,KAAL,CAAW,QAAX,IAAuB,KAAK,KAAL,CAAW,WAAX,KAA2B,SAAtD,EAAiE;AAC7D,MAAA,UAAU,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,UAAlB,EAA8B;AACvC,QAAA,QAAQ,EAAE,UAD6B;AAEvC,QAAA,SAAS,EAAE,iBAAe,KAAK,KAAL,CAAW,WAAX,CAAuB,SAAtC,GAA+C,MAA/C,GAAsD,KAAK,KAAL,CAAW,WAAX,CAAuB,SAA7E,GAAsF;AAF1D,OAA9B,CAAb;AAIH;;AACD,WAAO,UAAP;AAEH,GArBO;;AAsBR,EAAA,QAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,SAAK,SAAL,GAAiB,KAAK,KAAL,CAAW,IAAX,IAAmB,GAApC;;AACA,QAAM,SAAS,GAAG,KAAK,aAAL,EAAlB;;AACA,QAAM,UAAU,GAAG,KAAK,cAAL,EAAnB;;AACA,WACI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAE,KAAK,KAAL,CAAW,QAAX,GAAsB,wBAAtB,GAAgD,EAAhE;AACK,MAAA,WAAW,EAAE,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CADlB;AAEK,MAAA,YAAY,EAAE,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAFnB;AAGK,MAAA,GAAG,EAAE,KAAK,QAHf;AAIK,MAAA,KAAK,EAAE;AAJZ,KAAA,EAKI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,GAAG,EAAE,KAAK,SAAf;AACI,MAAA,SAAS,EAAE,KAAK,KAAL,CAAW,QAAX,GAAsB,mBAAtB,GAA2C,EAD1D;AAEK,MAAA,KAAK,EAAE;AAFZ,KAAA,CALJ,CADJ;AAWH,GAfD;;AAgBJ,SAAA,QAAA;AAAC,CA9MD,CAAuB,KAAK,CAAC,SAA7B,CAAA;;AAiNI,OAAA,CAAA,QAAA,GAAA,QAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = require(\"react\");\r\nvar InteractionEvents;\r\n(function (InteractionEvents) {\r\n    InteractionEvents[\"MouseDown\"] = \"mousedown\";\r\n    InteractionEvents[\"MouseMove\"] = \"mousemove\";\r\n    InteractionEvents[\"MouseUp\"] = \"mouseup\";\r\n    InteractionEvents[\"TouchStart\"] = \"touchstart\";\r\n    InteractionEvents[\"TouchMove\"] = \"touchmove\";\r\n    InteractionEvents[\"TouchEnd\"] = \"touchend\";\r\n})(InteractionEvents || (InteractionEvents = {}));\r\nvar Joystick = /** @class */ (function (_super) {\r\n    __extends(Joystick, _super);\r\n    function Joystick(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.state = {\r\n            dragging: false\r\n        };\r\n        _this._stickRef = React.createRef();\r\n        _this._baseRef = React.createRef();\r\n        _this._throttleMoveCallback = (function () {\r\n            var lastCall = 0;\r\n            return function (event) {\r\n                var now = new Date().getTime();\r\n                var throttleAmount = _this.props.throttle || 0;\r\n                if (now - lastCall < throttleAmount) {\r\n                    return;\r\n                }\r\n                lastCall = now;\r\n                if (_this.props.move) {\r\n                    return _this.props.move(event);\r\n                }\r\n            };\r\n        })();\r\n        _this._boundMouseUp = function () {\r\n            _this._mouseUp();\r\n        };\r\n        _this._boundMouseMove = function (event) {\r\n            _this._mouseMove(event);\r\n        };\r\n        return _this;\r\n    }\r\n    Joystick.prototype._updatePos = function (coordinates) {\r\n        var _this = this;\r\n        window.requestAnimationFrame(function () {\r\n            _this.setState({\r\n                coordinates: coordinates\r\n            });\r\n        });\r\n        this._throttleMoveCallback({\r\n            type: \"move\",\r\n            x: coordinates.relativeX,\r\n            y: -coordinates.relativeY,\r\n            direction: coordinates.direction\r\n        });\r\n    };\r\n    Joystick.prototype._mouseDown = function (e) {\r\n        if (this.props.disabled !== true) {\r\n            this._parentRect = this._baseRef.current.getBoundingClientRect();\r\n            this.setState({\r\n                dragging: true\r\n            });\r\n            if (e.type === InteractionEvents.MouseDown) {\r\n                window.addEventListener(InteractionEvents.MouseUp, this._boundMouseUp);\r\n                window.addEventListener(InteractionEvents.MouseMove, this._boundMouseMove);\r\n            }\r\n            else {\r\n                window.addEventListener(InteractionEvents.TouchEnd, this._boundMouseUp);\r\n                window.addEventListener(InteractionEvents.TouchMove, this._boundMouseMove);\r\n            }\r\n            if (this.props.start) {\r\n                this.props.start({\r\n                    type: \"start\",\r\n                    x: null,\r\n                    y: null,\r\n                    direction: null\r\n                });\r\n            }\r\n        }\r\n    };\r\n    Joystick.prototype._getDirection = function (atan2) {\r\n        if (atan2 > 2.35619449 || atan2 < -2.35619449) {\r\n            return \"FORWARD\";\r\n        }\r\n        else if (atan2 < 2.35619449 && atan2 > 0.785398163) {\r\n            return \"RIGHT\";\r\n        }\r\n        else if (atan2 < -0.785398163) {\r\n            return \"LEFT\";\r\n        }\r\n        return \"BACKWARD\";\r\n    };\r\n    Joystick.prototype._getWithinBounds = function (value) {\r\n        var halfBaseSize = this._baseSize / 2;\r\n        if (value > halfBaseSize) {\r\n            return halfBaseSize;\r\n        }\r\n        if (value < -(halfBaseSize)) {\r\n            return halfBaseSize * -1;\r\n        }\r\n        return value;\r\n    };\r\n    Joystick.prototype._mouseMove = function (event) {\r\n        if (this.state.dragging) {\r\n            var absoluteX = null;\r\n            var absoluteY = null;\r\n            if (event.type === InteractionEvents.MouseMove) {\r\n                absoluteX = event.clientX;\r\n                absoluteY = event.clientY;\r\n            }\r\n            else {\r\n                absoluteX = event.touches[0].clientX;\r\n                absoluteY = event.touches[0].clientY;\r\n            }\r\n            var relativeX = this._getWithinBounds(absoluteX - this._parentRect.left - (this._baseSize / 2));\r\n            var relativeY = this._getWithinBounds(absoluteY - this._parentRect.top - (this._baseSize / 2));\r\n            var atan2 = Math.atan2(relativeX, relativeY);\r\n            this._updatePos({\r\n                relativeX: relativeX,\r\n                relativeY: relativeY,\r\n                direction: this._getDirection(atan2),\r\n                axisX: absoluteX - this._parentRect.left,\r\n                axisY: absoluteY - this._parentRect.top\r\n            });\r\n        }\r\n    };\r\n    Joystick.prototype._mouseUp = function () {\r\n        this.setState({\r\n            dragging: false,\r\n            coordinates: undefined\r\n        });\r\n        window.removeEventListener(\"mouseup\", this._boundMouseUp);\r\n        window.removeEventListener(\"mousemove\", this._boundMouseMove);\r\n        if (this.props.stop) {\r\n            this.props.stop({\r\n                type: \"stop\",\r\n                x: null,\r\n                y: null,\r\n                direction: null\r\n            });\r\n        }\r\n    };\r\n    Joystick.prototype._getBaseStyle = function () {\r\n        var baseColor = this.props.baseColor !== undefined ? this.props.baseColor : \"#000033\";\r\n        var baseSizeString = this._baseSize + \"px\";\r\n        return {\r\n            height: baseSizeString,\r\n            width: baseSizeString,\r\n            background: baseColor,\r\n            borderRadius: this._baseSize,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center'\r\n        };\r\n    };\r\n    Joystick.prototype._getStickStyle = function () {\r\n        var stickColor = this.props.stickColor !== undefined ? this.props.stickColor : \"#3D59AB\";\r\n        var stickSize = this._baseSize / 1.5 + \"px\";\r\n        var stickStyle = {\r\n            background: stickColor,\r\n            cursor: \"move\",\r\n            height: stickSize,\r\n            width: stickSize,\r\n            borderRadius: this._baseSize,\r\n            flexShrink: 0\r\n        };\r\n        if (this.state.dragging && this.state.coordinates !== undefined) {\r\n            stickStyle = Object.assign({}, stickStyle, {\r\n                position: 'absolute',\r\n                transform: \"translate3d(\" + this.state.coordinates.relativeX + \"px, \" + this.state.coordinates.relativeY + \"px, 0)\"\r\n            });\r\n        }\r\n        return stickStyle;\r\n    };\r\n    Joystick.prototype.render = function () {\r\n        this._baseSize = this.props.size || 100;\r\n        var baseStyle = this._getBaseStyle();\r\n        var stickStyle = this._getStickStyle();\r\n        return (React.createElement(\"div\", { className: this.props.disabled ? 'joystick-base-disabled' : '', onMouseDown: this._mouseDown.bind(this), onTouchStart: this._mouseDown.bind(this), ref: this._baseRef, style: baseStyle },\r\n            React.createElement(\"div\", { ref: this._stickRef, className: this.props.disabled ? 'joystick-disabled' : '', style: stickStyle })));\r\n    };\r\n    return Joystick;\r\n}(React.Component));\r\nexports.Joystick = Joystick;\r\n//# sourceMappingURL=Joystick.js.map"]},"metadata":{},"sourceType":"script"}